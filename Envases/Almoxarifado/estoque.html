<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="estoque.css">
    <title>Estoque</title>
</head>
<body>
    <div class="wrapper">
           <video autoplay muted loop id="videoBG">
        <source src="../../static/video/videoplayback.mp4" type="video/mp4">
    </video>
        <h1>Estoque</h1>

        <iframe class="iframe-sidebar" src="../sidebar/sidebar.html" scrolling="no"  allowtransparency="true"  style="background-color: transparent;" ></iframe>
    
        <div class="table-container">
            <table>
                <caption>
                    Estoque de Produtos / Almoxarifado / TOTVS
                </caption>
                <tr>
                    <th>Descrição</th>
                    <th>Endereço</th>
                    <th>Codigo TOTVS</th>
                    <th>Codigo Fornecedor</th>
                    <th>Equipamento</th>
                    <th>Quantidade</th>
                </tr>
                <tr>
                    <td data-cell="name">CORREIA DENTADA SIDEL MATRIX</td> <!--Descrição-->
                    <td data-cell="poles">A1.D0.01</td> <!--Endereço-->
                    <td data-cell="Podium">238977</td> <!--Codigo TOTVS-->
                    <td data-cell="Wins">190456</td> <!--Codigo Fornecedor-->
                    <td data-cell="Careers Points">SOPRADORA</td> <!--Equipamento-->
                    <td data-cell="Championships">0</td> <!--Quantidade-->
                </tr>
                <tr>
                    <td>teste com peso do celular</td>
                    <td>A1.D0.02</td>
                    <td>243197</td>
                    <td>190456</td>
                    <td>SOPRADORA</td>
                    <td id="peso">7</td>
                </tr>
                <tr>
                    <td>ANEL;SIDEL/00000092717</td>
                    <td>A1.D1.01</td>
                    <td>233241</td>
                    <td>92717</td>
                    <td>SOPRADORA</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>ELEMENTO FILTRANTE DE FILTRO DE AR INDUSTRIAL SIDEL</td>
                    <td>A1.D1.02</td>
                    <td>241030</td>
                    <td>178535</td>
                    <td>SOPRADORA</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>GOUPIILLE BETA SIDEL</td>
                    <td>A1.D1.03</td>
                    <td>239784</td>
                    <td>167584</td>
                    <td>SOPRADORA</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>ANEL JUNTA</td>
                    <td>A1.D1.04</td>
                    <td>239743</td>
                    <td>209130</td>
                    <td>SOPRADORA</td>
                    <td>4</td>
                </tr>
                <tr>
                    <td>JOIN 202 3/4</td>
                    <td>A1.D1.05</td>
                    <td>239746</td>
                    <td>209132</td>
                    <td>SOPRADORA</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>CAPTEUR DE SECURITE</td>
                    <td>A1.D1.06</td>
                    <td>239803</td>
                    <td>191275</td>
                    <td>SOPRADORA</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>PINO ELASTICO SIDEL</td>
                    <td>A1.D1.07</td>
                    <td>258998</td>
                    <td>14744</td>
                    <td>SOPRADORA</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>KIT AXE DE SECURITE FDM</td>
                    <td>A1.D0.08</td>
                    <td>237733</td>
                    <td>99000648563</td>
                    <td>SOPRADORA</td>
                    <td>7</td>
                </tr>
                <tr>
                    <td>DETECTOR OPTO M18 24V</td>
                    <td>A1.D0.09</td>
                    <td>239802</td>
                    <td>150532</td>
                    <td>SOPRADORA</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>CURVA ORIENTAVEL EW06LA3C</td>
                    <td>A1.D0.10</td>
                    <td>259000</td>
                    <td>82533</td>
                    <td>SOPRADORA</td>
                    <td>7</td>
                </tr>
                <tr>
                    <td>BUCHA</td>
                    <td>A1.D0.11</td>
                    <td>233316</td>
                    <td>115747</td>
                    <td>SOPRADORA</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>PINO CILINDRO</td>
                    <td>A1.D0.12</td>
                    <td>236254</td>
                    <td>53</td>
                    <td>SOPRADORA</td><!--Equipamento-->
                    <td>4</td>
                </tr>
            </table>
        </div>
    </div>
   
    
<script>
async function atualizarPeso() {
    try {
        let response = await fetch("https://iotenvases.onrender.com/pieces"); // consulta backend
        let data = await response.json();

        // verifica se veio o valor da balança
        if (data.pieceCount !== undefined) {
            document.getElementById("peso").innerText = data.pieceCount || 0; // atualiza o peso
        } else {
            document.getElementById("peso").innerText = data.message;
        }
    } catch (error) {
        console.error("Erro ao buscar peso:", error);
        document.getElementById("peso").innerText = "Erro";
    }
}

// atualiza a cada 1 segundo
setInterval(atualizarPeso, 1000);

// primeira chamada
atualizarPeso();
</script>



</body>
</html>