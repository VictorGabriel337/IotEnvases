<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="Dashboard.css" rel="stylesheet" />
    <title>Dashboard</title>
</head>
<body>
    <video autoplay muted loop id="videoBG">
        <source src="video/videoplayback.mp4" type="video/mp4">
      </video> 

      <iframe class="sidebar-iframe" scrolling="no" src="../sidebar/sidebar.html"></iframe>

    <div class="main">
        
        <div class="primeira-coluna">

            <div class="definir">
                <h3 class="text1">Produto</h3>
                <div class="icon-img"> <img src="img/silhueta-garrafa.png"></div>
                <select id="produtoSelect">
                    <option value="card-coca/coca.html">Coca-cola original</option>
                    <option value="card-coca/zero.html">Coca-cola zero</option>
                    <option value="card-coca/fanta.html">Bi Fanta</option>
                    <option value="garrafa sem rotulo">Garrafa sem rotulo</option>
                </select>
            </div>
            <div class="definir">
                <h3 class="text1">Garrafa produzida</h3>
                <div class="icon-img"> <img src="img/silhueta-garrafa.png"></div>
                <p id="lowCount" class="sensorlow">Carregando...</p>  <!-- Aqui será exibido o valor de lastLowTime -->
            </div>
            <div class="definir">
                <h3 class="text1">Maq. Parada</h3>
                <div class="icon-img"> <img src="img/silhueta-garrafa.png"></div>
                <p id="maqParada" class="sensorlow">Carregando...</p>
            </div>
            <div class="definir">
                <h3 class="text1">Maq. Produzindo</h3>
                <div class="icon-img"> <img src="img/silhueta-garrafa.png"></div>
                <p id="maqProduzindo" class="sensorlow">Carregando...</p>
            </div>
        </div>

        <div class="segunda-coluna">
            <div class="prim-coluna">
                <iframe id="produtoIframe" class="coca-iframe" scrolling="no" src="card-coca/coca.html"></iframe>
                <!-- <iframe class="coca-iframe" scrolling="no" src="card-coca/coca.html"></iframe>
                <iframe class="coca-iframe" scrolling="no" src="card-coca/fanta.html"></iframe>
                <iframe class="coca-iframe" scrolling="no" src="card-coca/zero.html"></iframe> -->
            </div>
            <div class="seg-coluna"></div>
            <div class="ter-coluna"></div>
        </div>

        <div class="terceira-coluna">

            <div class="first-column"></div>
            <div class="second-column"></div>


        </div>

        <div class="quarta-coluna"> 
            <div class="coluna-um"></div>
            <div class="coluna-dois"></div>
        </div>


    </div> <!--div main-->

    <script>
        // Captura os elementos
        const selectElement = document.getElementById('produtoSelect');
        const iframeElement = document.getElementById('produtoIframe');

        // Adiciona um evento para monitorar mudanças no select
        selectElement.addEventListener('change', function() {
            const selectedValue = this.value; // Pega o valor selecionado
            iframeElement.src = selectedValue; // Atualiza o src do iframe




        });

</script>
<script>
  // Defina o endereço IP do ESP8266
const espIp = 'http://192.168.15.7'; // Coloque o IP do seu ESP8266

// Função para pegar os dados
function getSensorData() {
  // Usando fetch para fazer uma requisição GET ao servidor do ESP8266
  fetch(espIp + 'https://victorgabriel337.github.io/IotEnvases/Envases/Dashboard/Dashboard.html')  // Defina a rota do seu endpoint
    .then(response => {
      if (!response.ok) {
        throw new Error('Erro ao acessar o servidor');
      }
      return response.json();
    })
    .then(data => {
      console.log('Dados recebidos:', data);
      // Agora você pode usar os dados recebidos, como o tempo de cadência, etc.
      document.getElementById('lowSignalCount').innerText = data.lowSignalCount;
      document.getElementById('cadenceTotalTime').innerText = data.cadenceTotalTime;
      document.getElementById('nonCadenceTotalTime').innerText = data.nonCadenceTotalTime;
    })
    .catch(error => {
      console.error('Erro:', error);
    });
}

// Chame a função para pegar os dados
getSensorData();

// Para pegar os dados a cada 5 segundos, por exemplo:
setInterval(getSensorData, 5000);


    </script>



    
</body>
</html>